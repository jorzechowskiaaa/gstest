<?xml version="1.0" encoding="UTF-8"?>
<CustomField xmlns="http://soap.sforce.com/2006/04/metadata">
    <fullName>Local_ETA_Text__c</fullName>
    <externalId>false</externalId>
    <formula>IF(
NOT(
ISBLANK(FSL_Service_Appointment__r.SchedStartTime)),
(IF(
  OR(
    VALUE( LEFT( TEXT( TIMEVALUE(FSL_Service_Appointment__r.SchedStartTime - (VALUE(MID(Member_Location_TZ_Offset__c,5,IF(LEN(Member_Location_TZ_Offset__c)=8,1,2)))/24)) ), 2 ) ) = 0,
    VALUE( LEFT( TEXT( TIMEVALUE(FSL_Service_Appointment__r.SchedStartTime - (VALUE(MID(Member_Location_TZ_Offset__c,5,IF(LEN(Member_Location_TZ_Offset__c)=8,1,2)))/24)) ), 2 ) ) = 12
  ),
  &quot;12&quot;,
  TEXT( VALUE( LEFT( TEXT( TIMEVALUE(FSL_Service_Appointment__r.SchedStartTime - (VALUE(MID(Member_Location_TZ_Offset__c,5,IF(LEN(Member_Location_TZ_Offset__c)=8,1,2)))/24)) ), 2 ) ) 
   -
   IF( 
     VALUE( LEFT( TEXT( TIMEVALUE(FSL_Service_Appointment__r.SchedStartTime - (VALUE(MID(Member_Location_TZ_Offset__c,5,IF(LEN(Member_Location_TZ_Offset__c)=8,1,2)))/24)) ), 2 ) ) &lt; 12, 
     0, 
     12 
   ) 
  )
)
&amp; &quot;:&quot; &amp;
MID( TEXT( TIMEVALUE(FSL_Service_Appointment__r.SchedStartTime - (VALUE(MID(Member_Location_TZ_Offset__c,5,IF(LEN(Member_Location_TZ_Offset__c)=8,1,2)))/24)) ), 4, 2 )
&amp; &quot; &quot; &amp;
IF(
  VALUE( LEFT( TEXT( TIMEVALUE(FSL_Service_Appointment__r.SchedStartTime - (VALUE(MID(Member_Location_TZ_Offset__c,5,IF(LEN(Member_Location_TZ_Offset__c)=8,1,2)))/24)) ), 2 ) ) &lt; 12,
  &quot;AM&quot;,
  &quot;PM&quot;
)),
IF(FSL_Work_Order__r.PTA__c &gt; NOW(),
(IF(
  OR(
    VALUE( LEFT( TEXT( TIMEVALUE(FSL_Work_Order__r.PTA__c - (VALUE(MID(Member_Location_TZ_Offset__c,5,IF(LEN(Member_Location_TZ_Offset__c)=8,1,2)))/24)) ), 2 ) ) = 0,
    VALUE( LEFT( TEXT( TIMEVALUE(FSL_Work_Order__r.PTA__c - (VALUE(MID(Member_Location_TZ_Offset__c,5,IF(LEN(Member_Location_TZ_Offset__c)=8,1,2)))/24)) ), 2 ) ) = 12
  ),
  &quot;12&quot;,
  TEXT( VALUE( LEFT( TEXT( TIMEVALUE(FSL_Work_Order__r.PTA__c - (VALUE(MID(Member_Location_TZ_Offset__c,5,IF(LEN(Member_Location_TZ_Offset__c)=8,1,2)))/24)) ), 2 ) ) 
   -
   IF( 
     VALUE( LEFT( TEXT( TIMEVALUE(FSL_Work_Order__r.PTA__c - (VALUE(MID(Member_Location_TZ_Offset__c,5,IF(LEN(Member_Location_TZ_Offset__c)=8,1,2)))/24)) ), 2 ) ) &lt; 12, 
     0, 
     12 
   ) 
  )
)
&amp; &quot;:&quot; &amp;
MID( TEXT( TIMEVALUE(FSL_Work_Order__r.PTA__c - (VALUE(MID(Member_Location_TZ_Offset__c,5,IF(LEN(Member_Location_TZ_Offset__c)=8,1,2)))/24)) ), 4, 2 )
&amp; &quot; &quot; &amp;
IF(
  VALUE( LEFT( TEXT( TIMEVALUE(FSL_Work_Order__r.PTA__c - (VALUE(MID(Member_Location_TZ_Offset__c,5,IF(LEN(Member_Location_TZ_Offset__c)=8,1,2)))/24)) ), 2 ) ) &lt; 12,
  &quot;AM (PTA)&quot;,
  &quot;PM (PTA)&quot;
)),NULL)

)</formula>
    <label>Local ETA</label>
    <required>false</required>
    <trackHistory>false</trackHistory>
    <trackTrending>false</trackTrending>
    <type>Text</type>
    <unique>false</unique>
</CustomField>
