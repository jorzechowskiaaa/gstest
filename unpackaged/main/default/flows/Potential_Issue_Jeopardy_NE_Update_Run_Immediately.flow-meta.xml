<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <apiVersion>58.0</apiVersion>
    <areMetricsLoggedToDataCloud>false</areMetricsLoggedToDataCloud>
    <assignments>
        <name>Add_Active_Flow_Settings_To_List</name>
        <label>Add Active Flow Settings To List</label>
        <locationX>1106</locationX>
        <locationY>755</locationY>
        <assignmentItems>
            <assignToReference>varTColActiveFlowSetting</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>Loop_All_Active_Flow_Settings.Label</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Loop_All_Active_Flow_Settings</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_SA_data_for_Driver_Decline_violation</name>
        <label>Assign SA data for Driver Decline violation</label>
        <locationX>1370</locationX>
        <locationY>1163</locationY>
        <assignmentItems>
            <assignToReference>SAtoUpdate.Id</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SAtoUpdate.FSL__InJeopardy__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SAtoUpdate.FSL__InJeopardyReason__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Driver Decline</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>caseToUpdate.Id</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Work_Order__r.CaseId</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>caseToUpdate.Violation_Type__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Driver Decline</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>update_SA</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_SA_data_for_Driver_Needs_Help</name>
        <label>Assign SA data for Driver Needs Help</label>
        <locationX>138</locationX>
        <locationY>1379</locationY>
        <assignmentItems>
            <assignToReference>SAtoUpdate.FSL__InJeopardy__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SAtoUpdate.FSL__InJeopardyReason__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Driver Needs Help</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>caseToUpdate.Violation_Type__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Driver Needs Help</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>caseToUpdate.Dispatcher_Status__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>New</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SAtoUpdate.Id</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>caseToUpdate.Id</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Work_Order__r.CaseId</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>caseToUpdate.OwnerId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>get_driver_queue_loop.Id</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>get_driver_queue_loop</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_SA_data_for_Priority_Queue_loop</name>
        <label>Assign SA data for Priority Queue loop</label>
        <locationX>842</locationX>
        <locationY>1379</locationY>
        <assignmentItems>
            <assignToReference>SAtoUpdate.Id</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>caseToUpdate.Id</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Work_Order__r.CaseId</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SAtoUpdate.FSL__InJeopardy__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SAtoUpdate.FSL__InJeopardyReason__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Priority - Safety Check Missing</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>caseToUpdate.Violation_Type__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Priority - Safety Check Missing</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>caseToUpdate.OwnerId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Priority_Queue_loop.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>caseToUpdate.Dispatcher_Status__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>New</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Priority_Queue_loop</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_SA_data_for_RAP_Queue</name>
        <label>Assign SA data for RAP Queue</label>
        <locationX>1810</locationX>
        <locationY>1379</locationY>
        <assignmentItems>
            <assignToReference>SAtoUpdate.Id</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>caseToUpdate.Id</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Work_Order__r.CaseId</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SAtoUpdate.FSL__InJeopardy__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SAtoUpdate.FSL__InJeopardyReason__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Cancelled or NSR RAP Call</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>caseToUpdate.Violation_Type__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Cancelled or NSR RAP Calls</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>caseToUpdate.OwnerId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>RAP_Queue_loop.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>caseToUpdate.Dispatcher_Status__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>New</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>RAP_Queue_loop</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_SA_Data_for_Reroute_Queue</name>
        <label>Assign SA Data for Reroute Queue</label>
        <locationX>1194</locationX>
        <locationY>1379</locationY>
        <assignmentItems>
            <assignToReference>SAtoUpdate.Id</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>caseToUpdate.Id</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Work_Order__r.CaseId</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SAtoUpdate.FSL__InJeopardy__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SAtoUpdate.FSL__InJeopardyReason__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Facility Declined</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>caseToUpdate.Violation_Type__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Facility Decline</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>caseToUpdate.OwnerId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Reroute_Queue_loop.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>caseToUpdate.Dispatcher_Status__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>New</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Reroute_Queue_loop</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_SA_data_for_Unspotted_Queue</name>
        <label>Assign SA data for Unspotted Queue</label>
        <locationX>490</locationX>
        <locationY>1379</locationY>
        <assignmentItems>
            <assignToReference>SAtoUpdate.FSL__InJeopardy__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SAtoUpdate.FSL__InJeopardyReason__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Not Geo-Coded</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>caseToUpdate.Violation_Type__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Not Geo-Coded</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>caseToUpdate.OwnerId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>get_Unspotted_Queue_loop.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SAtoUpdate.Id</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>caseToUpdate.Id</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Work_Order__r.CaseId</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>caseToUpdate.Dispatcher_Status__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>New</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>get_Unspotted_Queue_loop</targetReference>
        </connector>
    </assignments>
    <collectionProcessors>
        <name>get_driver_queue</name>
        <elementSubtype>FilterCollectionProcessor</elementSubtype>
        <label>get driver queue</label>
        <locationX>50</locationX>
        <locationY>1163</locationY>
        <assignNextValueToReference>currentItem_get_driver_queue_0</assignNextValueToReference>
        <collectionProcessorType>FilterCollectionProcessor</collectionProcessorType>
        <collectionReference>get_Queues</collectionReference>
        <conditionLogic>and</conditionLogic>
        <conditions>
            <leftValueReference>currentItem_get_driver_queue_0.DeveloperName</leftValueReference>
            <operator>EqualTo</operator>
            <rightValue>
                <stringValue>Driver_Queue</stringValue>
            </rightValue>
        </conditions>
        <connector>
            <targetReference>get_driver_queue_loop</targetReference>
        </connector>
    </collectionProcessors>
    <collectionProcessors>
        <name>get_Priority_Queue</name>
        <elementSubtype>FilterCollectionProcessor</elementSubtype>
        <label>get Priority Queue</label>
        <locationX>754</locationX>
        <locationY>1163</locationY>
        <assignNextValueToReference>currentItem_get_Priority_Queue</assignNextValueToReference>
        <collectionProcessorType>FilterCollectionProcessor</collectionProcessorType>
        <collectionReference>get_Queues</collectionReference>
        <conditionLogic>and</conditionLogic>
        <conditions>
            <leftValueReference>currentItem_get_Priority_Queue.DeveloperName</leftValueReference>
            <operator>EqualTo</operator>
            <rightValue>
                <stringValue>Priority_Queue</stringValue>
            </rightValue>
        </conditions>
        <connector>
            <targetReference>Priority_Queue_loop</targetReference>
        </connector>
    </collectionProcessors>
    <collectionProcessors>
        <name>get_RAP_Queue</name>
        <elementSubtype>FilterCollectionProcessor</elementSubtype>
        <label>get RAP Queue</label>
        <locationX>1722</locationX>
        <locationY>1163</locationY>
        <assignNextValueToReference>currentItem_get_RAP_Queue</assignNextValueToReference>
        <collectionProcessorType>FilterCollectionProcessor</collectionProcessorType>
        <collectionReference>get_Queues</collectionReference>
        <conditionLogic>and</conditionLogic>
        <conditions>
            <leftValueReference>currentItem_get_RAP_Queue.DeveloperName</leftValueReference>
            <operator>EqualTo</operator>
            <rightValue>
                <stringValue>RAP_Queue</stringValue>
            </rightValue>
        </conditions>
        <connector>
            <targetReference>RAP_Queue_loop</targetReference>
        </connector>
    </collectionProcessors>
    <collectionProcessors>
        <name>get_Reroute_Queue</name>
        <elementSubtype>FilterCollectionProcessor</elementSubtype>
        <label>get Reroute Queue</label>
        <locationX>1106</locationX>
        <locationY>1163</locationY>
        <assignNextValueToReference>currentItem_get_Reroute_Queue</assignNextValueToReference>
        <collectionProcessorType>FilterCollectionProcessor</collectionProcessorType>
        <collectionReference>get_Queues</collectionReference>
        <conditionLogic>and</conditionLogic>
        <conditions>
            <leftValueReference>currentItem_get_Reroute_Queue.DeveloperName</leftValueReference>
            <operator>EqualTo</operator>
            <rightValue>
                <stringValue>Reroute_Queue</stringValue>
            </rightValue>
        </conditions>
        <connector>
            <targetReference>Reroute_Queue_loop</targetReference>
        </connector>
    </collectionProcessors>
    <collectionProcessors>
        <name>get_Unspotted_queue</name>
        <elementSubtype>FilterCollectionProcessor</elementSubtype>
        <label>get Unspotted queue</label>
        <locationX>402</locationX>
        <locationY>1163</locationY>
        <assignNextValueToReference>currentItem_get_Unspotted_queue</assignNextValueToReference>
        <collectionProcessorType>FilterCollectionProcessor</collectionProcessorType>
        <collectionReference>get_Queues</collectionReference>
        <conditionLogic>and</conditionLogic>
        <conditions>
            <leftValueReference>currentItem_get_Unspotted_queue.DeveloperName</leftValueReference>
            <operator>EqualTo</operator>
            <rightValue>
                <stringValue>Unspotted_Queue</stringValue>
            </rightValue>
        </conditions>
        <connector>
            <targetReference>get_Unspotted_Queue_loop</targetReference>
        </connector>
    </collectionProcessors>
    <decisions>
        <name>Bypass_Tests</name>
        <label>Bypass Tests?</label>
        <locationX>666</locationX>
        <locationY>323</locationY>
        <defaultConnector>
            <targetReference>If_Wo_has_a_case</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No Bypass</defaultConnectorLabel>
        <rules>
            <name>Bypass</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$User.Bypass_Tests__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <label>Bypass</label>
        </rules>
    </decisions>
    <decisions>
        <name>If_Exclude_From_Case_Reassignment</name>
        <label>If Exclude From Case Reassignment</label>
        <locationX>1018</locationX>
        <locationY>1763</locationY>
        <defaultConnector>
            <targetReference>update_Case</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Exclude</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.ServiceTerritoryId</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.ServiceTerritory.Excluded_from_Case_Reassignment__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <label>Exclude</label>
        </rules>
    </decisions>
    <decisions>
        <name>If_Wo_has_a_case</name>
        <label>If Wo has a case</label>
        <locationX>1634</locationX>
        <locationY>431</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>if_Wo_Yes</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Work_Order__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Work_Order__r.CaseId</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Work_Order__r.Case.Dispatcher_Status__c</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <stringValue>Working</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Subject</leftValueReference>
                <operator>Contains</operator>
                <rightValue>
                    <stringValue>Breakdown</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.FSL__InJeopardy__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Potential_Issue__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>get_Flow_Setting</targetReference>
            </connector>
            <label>if Wo - Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>SA_Update_check</name>
        <label>SA Update check</label>
        <locationX>1018</locationX>
        <locationY>1055</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Driver_Needs_Help</name>
            <conditionLogic>1 OR (2 AND 3 AND 4 AND 5)</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Work_Order__r.Priority</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Driver_Needs_Help_Checkbox__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Driver_Needs_Help_Checkbox__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>varTColActiveFlowSetting</leftValueReference>
                <operator>Contains</operator>
                <rightValue>
                    <stringValue>NE 10</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Work_Order__r.Case.Dispatcher_Status__c</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <stringValue>Working</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>get_driver_queue</targetReference>
            </connector>
            <label>Driver Needs Help</label>
        </rules>
        <rules>
            <name>Update_SA_for_Unspotted_Queue</name>
            <conditionLogic>1 AND 8 AND 9 AND ((2 AND 5) OR (3 AND 6) OR (4 AND 7))</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Work_Order__r.Priority</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Medium</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.ServiceTerritoryId</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.FSL__InternalSLRGeolocation__Latitude__s</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.FSL__InternalSLRGeolocation__Longitude__s</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.ServiceTerritoryId</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.FSL__InternalSLRGeolocation__Latitude__s</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.FSL__InternalSLRGeolocation__Longitude__s</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>varTColActiveFlowSetting</leftValueReference>
                <operator>Contains</operator>
                <rightValue>
                    <stringValue>NE 11</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Work_Order__r.Case.Dispatcher_Status__c</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <stringValue>Working</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>get_Unspotted_queue</targetReference>
            </connector>
            <label>Update SA for Unspotted Queue</label>
        </rules>
        <rules>
            <name>Priority_Queue</name>
            <conditionLogic>(1 AND 2 AND 3 AND 4 AND 5) AND NOT 6</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Work_Order__r.Priority</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Critical</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Safety_Check_Documentation__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>varTColActiveFlowSetting</leftValueReference>
                <operator>Contains</operator>
                <rightValue>
                    <stringValue>NE 12</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Work_Order__r.Case.Dispatcher_Status__c</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <stringValue>Working</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Work_Order_Priority__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Work_Order__r.Priority__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>AP</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>get_Priority_Queue</targetReference>
            </connector>
            <label>Priority Queue</label>
        </rules>
        <rules>
            <name>Reroute_Queue</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Status</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Status</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Declined</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>varTColActiveFlowSetting</leftValueReference>
                <operator>Contains</operator>
                <rightValue>
                    <stringValue>NE 13</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Work_Order__r.Case.Dispatcher_Status__c</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <stringValue>Working</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>get_Reroute_Queue</targetReference>
            </connector>
            <label>Reroute Queue</label>
        </rules>
        <rules>
            <name>Driver_Decline_Violation_type</name>
            <conditionLogic>1 AND 2 AND 3 AND (4 OR 5 OR 6) AND 7 AND 8</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Work_Order__r.Priority</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Medium</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Status</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Status</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Declined</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Decline_Reason__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Not My Service Area</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Decline_Reason__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Refused Call</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Decline_Reason__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Equipment Required Unavailable</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>varTColActiveFlowSetting</leftValueReference>
                <operator>Contains</operator>
                <rightValue>
                    <stringValue>NE 14</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Work_Order__r.Case.Dispatcher_Status__c</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <stringValue>Working</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_SA_data_for_Driver_Decline_violation</targetReference>
            </connector>
            <label>Driver Decline - Violation type</label>
        </rules>
        <rules>
            <name>RAP_Queue</name>
            <conditionLogic>1 AND 2 AND 12 AND 11 AND 13 AND (3 OR 4 OR 5 OR 6 OR 7 OR 8 OR 9 OR 10)</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Work_Order__r.Responder_Id__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>RAP_SRVR</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Status</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Cleared</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Resolution_Code__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>R001</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Resolution_Code__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>R002</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Resolution_Code__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>R003</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Resolution_Code__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>R006</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Resolution_Code__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>R007</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Resolution_Code__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>R199</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Resolution_Code__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>X001</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Resolution_Code__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>X002</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>varTColActiveFlowSetting</leftValueReference>
                <operator>Contains</operator>
                <rightValue>
                    <stringValue>NE 15</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Status</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Work_Order__r.Case.Dispatcher_Status__c</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <stringValue>Working</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>get_RAP_Queue</targetReference>
            </connector>
            <label>RAP Queue</label>
        </rules>
    </decisions>
    <description>Removed Decline Reason Filter from Rule NE13. Changed setting FSL__InJeopardyReason__c on SA to &quot;Facility Declined&quot; with a &#39;d&#39; at the end as &quot;Facility Decline&quot; picklist value was de-activated for both record types. - Chris Yaskoski
-2025-02-13 removed WO Priority condition from reroute queue
-7/31/25 - AGB Updated SA Update check &gt; Priority Queue to excluded AP priority for SSFI-1303</description>
    <environments>Default</environments>
    <formulas>
        <name>DriverQueueOrNOAssignment</name>
        <dataType>String</dataType>
        <expression>IF(
  {!$Record.ServiceTerritory.Excluded_from_Case_Reassignment__c}, 
  {!$Record.Work_Order__r.Case.OwnerId},
  {!tempVar}
)</expression>
    </formulas>
    <interviewLabel>Potential Issue (Jeopardy) - NE (Update) - Run Immediately {!$Flow.CurrentDateTime}</interviewLabel>
    <label>Potential Issue (Jeopardy) - NE (Update) - Run Immediately</label>
    <loops>
        <name>get_driver_queue_loop</name>
        <label>get driver queue loop</label>
        <locationX>50</locationX>
        <locationY>1271</locationY>
        <collectionReference>get_driver_queue</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Assign_SA_data_for_Driver_Needs_Help</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>update_SA</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>get_Unspotted_Queue_loop</name>
        <label>get Unspotted Queue loop</label>
        <locationX>402</locationX>
        <locationY>1271</locationY>
        <collectionReference>get_Unspotted_queue</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Assign_SA_data_for_Unspotted_Queue</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>update_SA</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>Loop_All_Active_Flow_Settings</name>
        <label>Loop All Active Flow Settings</label>
        <locationX>1018</locationX>
        <locationY>647</locationY>
        <collectionReference>get_Flow_Setting</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Add_Active_Flow_Settings_To_List</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>get_Queues</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>Priority_Queue_loop</name>
        <label>Priority Queue loop</label>
        <locationX>754</locationX>
        <locationY>1271</locationY>
        <collectionReference>get_Priority_Queue</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Assign_SA_data_for_Priority_Queue_loop</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>update_SA</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>RAP_Queue_loop</name>
        <label>RAP Queue loop</label>
        <locationX>1722</locationX>
        <locationY>1271</locationY>
        <collectionReference>get_RAP_Queue</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Assign_SA_data_for_RAP_Queue</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>update_SA</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>Reroute_Queue_loop</name>
        <label>Reroute Queue loop</label>
        <locationX>1106</locationX>
        <locationY>1271</locationY>
        <collectionReference>get_Reroute_Queue</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Assign_SA_Data_for_Reroute_Queue</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>update_SA</targetReference>
        </noMoreValuesConnector>
    </loops>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>AUTO_LAYOUT_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>AutoLaunchedFlow</processType>
    <recordLookups>
        <name>get_Flow_Setting</name>
        <label>get Flow Setting</label>
        <locationX>1018</locationX>
        <locationY>539</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Loop_All_Active_Flow_Settings</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>isExecute__c</field>
            <operator>EqualTo</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>Jeopardy_Flow_Setting__mdt</object>
        <queriedFields>Id</queriedFields>
        <queriedFields>Label</queriedFields>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>get_Queues</name>
        <label>get Queues</label>
        <locationX>1018</locationX>
        <locationY>947</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>SA_Update_check</targetReference>
        </connector>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>Group</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordUpdates>
        <name>update_Case</name>
        <label>update Case</label>
        <locationX>1150</locationX>
        <locationY>1871</locationY>
        <inputReference>caseToUpdate</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>update_SA</name>
        <label>update SA</label>
        <locationX>1018</locationX>
        <locationY>1655</locationY>
        <connector>
            <targetReference>If_Exclude_From_Case_Reassignment</targetReference>
        </connector>
        <inputReference>SAtoUpdate</inputReference>
    </recordUpdates>
    <start>
        <locationX>540</locationX>
        <locationY>0</locationY>
        <connector>
            <targetReference>Bypass_Tests</targetReference>
        </connector>
        <filterLogic>(1 AND (2 AND 3)) OR (1 AND 4) OR (1 AND 7)AND 5 AND 6</filterLogic>
        <filters>
            <field>Subject</field>
            <operator>Contains</operator>
            <value>
                <stringValue>Breakdown</stringValue>
            </value>
        </filters>
        <filters>
            <field>SchedStartTime</field>
            <operator>IsNull</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </filters>
        <filters>
            <field>SchedEndTime</field>
            <operator>IsNull</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </filters>
        <filters>
            <field>Dispatched_Timestamp__c</field>
            <operator>IsNull</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </filters>
        <filters>
            <field>FSL__InJeopardy__c</field>
            <operator>EqualTo</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </filters>
        <filters>
            <field>Potential_Issue__c</field>
            <operator>EqualTo</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </filters>
        <filters>
            <field>Safety_Check_Documentation__c</field>
            <operator>EqualTo</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </filters>
        <object>ServiceAppointment</object>
        <recordTriggerType>Update</recordTriggerType>
        <triggerType>RecordAfterSave</triggerType>
    </start>
    <status>Active</status>
    <variables>
        <name>caseToUpdate</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Case</objectType>
    </variables>
    <variables>
        <name>currentItem_get_driver_queue_0</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Group</objectType>
    </variables>
    <variables>
        <name>currentItem_get_Priority_Queue</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Group</objectType>
    </variables>
    <variables>
        <name>currentItem_get_RAP_Queue</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Group</objectType>
    </variables>
    <variables>
        <name>currentItem_get_Reroute_Queue</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Group</objectType>
    </variables>
    <variables>
        <name>currentItem_get_Unspotted_queue</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Group</objectType>
    </variables>
    <variables>
        <name>SAtoUpdate</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>ServiceAppointment</objectType>
    </variables>
    <variables>
        <name>tempVar</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>varTColActiveFlowSetting</name>
        <dataType>String</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
</Flow>
